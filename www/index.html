<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
	
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

 
 
<meta charset="UTF-8">
  <!-- Good practice -->
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="stylesheet" type="text/css" href="css/style2.css" media="all"/>
<link rel="stylesheet" type="text/css" href="css/style.css"/>
<link rel="stylesheet" href="css/jquery.mobile-1.4.5.min.css"/>
<!-- <link rel="stylesheet" href="js/jquery.ui.css">	 -->	
		
<script src="js/jquery-2.1.3.min.js"></script>
<script src="js/jquery.mobile-1.4.5.js"></script>
<script src="js/jquery-ui.min.js"></script>
<script type="text/javascript" charset="utf-8" src="SavePhotoPlugin.js"></script>

<script type= "text/javascript" src= "cordova.js"></script>
<script type= "text/javascript" src= "js/index.js"></script>
<script type="text/javascript"></script>





</head>
<body onload="init()">
<div id="header">
	

</div>

<!-- rectangle in the back menu --> 
<div id= "rectangle" data-role="header" data-position="fixed" data-fullscreen="true" >		
	<!-- the little circles up top on the navigation -->
	<ul id="menu">
		<li data-menuanchor="firstpage"><a href="#section1" ></a></li>
		<li data-menuanchor="secondpage"><a href="#section2" ></a></li>
		<li data-menuanchor="3rdPage"><a href="#section3" ></a></li>
		<li data-menuanchor="4thPage"><a href="#section4" ></a></li>
		<li data-menuanchor="lastPage"><a href="#section5" ></a></li>
		
		<!-- <li data-menuanchor="home">home<a href="#section5" ></a></li> -->	
	</ul>
	
	<ul id="menu2">	
		<a href="index.html"><input type="image" id="homepng" src="img/home.png" alt="Submit" /></a>
		<input type="image" id="downloadpng" src="img/download.png" alt="Submit" />
		<input type="image" id="connectpng" src="img/connect.png" alt="Submit" />
		<a  href="#mypanel" >
			<img id="drawerspng" src="img/drawers.png"/>
		</a>
		
	</ul>
</div>


<!-- //sections start here  -->

<div id="section1" data-role="page" style="overflow-x: visible">
	<div data-role="main" class="ui-content">	
			<div id="where">
                  
				<div id="controls"> 
				
				     <input id="color" type="color" value="#ff0000" onchange="x =document.getElementById('color').value;"/>  
				     <input id="rangecolor" type="range" min="1" max="20" value="1" onchange="showValue(this.value)"/>  
				     <input id="white" type="button" onclick="color(this)" value="Eraser">
				     <input id="erase-color" type="button" value="Clear" id="clr" size="23" onclick="erase()">
				     <input id="save" type="button" value="Save" id="save" size="23" onclick="save()">
			    </div>
    
				</div>	
	</div>
	<canvas id="can" width="500" height="500" style="position:absolute;top:15%;left:5%;border:2px solid; "></canvas>
	<script>
		var canvas, ctx, flag = false,
    prevX = 0,
    currX = 0,
    prevY = 0,
    currY = 0,
    dot_flag = false;

var x = document.getElementById('color'),
    /* y = 7; */
    y = document.getElementById('range');

function init(){
	
    canvas = document.getElementById('can');
    ctx = canvas.getContext("2d");
    ctx.fillStyle = "rgba(0, 0, 0, 0)";
    
    w = canvas.width;
    h = canvas.height;


    canvas.addEventListener("mousemove", function (e) {
        findxy('move', e)
    }, false);
    canvas.addEventListener("mousedown", function (e) {
        findxy('down', e)
    }, false);
    canvas.addEventListener("mouseup", function (e) {
        findxy('up', e)
    }, false);
    canvas.addEventListener("mouseout", function (e) {
        findxy('out', e)
    }, false);
    
	if(ctx){
	canvas.addEventListener('touchstart', findxy, false);
	canvas.addEventListener('touchmove', findxy, false);
	}
}



function color(obj) {
    switch (obj.id) {
        case "white":
            x = "white";
            break;
    }

 if (x == "white") y = document.getElementById('range');

}

function draw() {
    ctx.beginPath();
    ctx.moveTo(prevX, prevY);
    ctx.lineTo(currX, currY);
    ctx.strokeStyle = x;
    ctx.lineWidth = y;
    ctx.stroke();
    ctx.closePath();
    console.log("darwing");
    

}

function erase() {
    var m = confirm("Want to clear");
    if (m) {
        ctx.clearRect(0, 0, w, h);
        canvas.width = canvas.width;
  
    }
}

function findxy(res, e) {
    if (res == 'down') {
        prevX = currX;
        prevY = currY;
        currX = e.clientX - canvas.offsetLeft;
        currY = e.clientY - canvas.offsetTop;

        flag = true;
        dot_flag = true;
        if (dot_flag) {
            ctx.beginPath();
            ctx.fillStyle = x;
            ctx.fillRect(currX, currY, 2, 2);
            ctx.closePath();
            dot_flag = false;
        }
    }
    if (res == 'up' || res == "out") {
        flag = false;
    }
    if (res == 'move') {
        if (flag) {
            prevX = currX;
            prevY = currY;
            currX = e.clientX - canvas.offsetLeft;
            currY = e.clientY - canvas.offsetTop;
            draw();
        }
    }

event.preventDefault();
}
</script>
	
</div>

<div id="section2" data-role="page">
	<div data-role="main" class="ui-content">	
	</div>
		
</div>


<div id="section3">
	<div data-role="main" class="ui-content">
	</div>
</div>  

<div id="section4">
	<div data-role="main" class="ui-content">	
	</div>
</div> 

<div id="section5">
	<div data-role="main" class="ui-content">		
	</div>
</div> 
  </div>


</body>
</html>